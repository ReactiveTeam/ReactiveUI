<!DOCTYPE html>
<html lang="en" class="app">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <link rel="stylesheet" href="../css/app.v2.css" type="text/css" />
    <link rel="stylesheet" href="../css/colors.css" type="text/css" />
    <link rel="stylesheet" href="../css/font-awesome.css" type="text/css" />
    <link rel="stylesheet" href="../css/element.css" type="text/css" />

    <script src="../js/app.v2.js"></script>
    <script src="../js/vue.js"></script>
    <script src="../js/element.js"></script>
    <script src="../js/components.js"></script>
    <script src="../js/buildNav.js" cache="false"></script>

    <!--[if lt IE 9]> <script src="js/ie/html5shiv.js" cache="false"></script> <script src="js/ie/respond.min.js" cache="false"></script> <script src="js/ie/excanvas.js" cache="false"></script> <![endif]-->
</head>
<body>
    <div id="reactApp" style="height:100%;">
    <section class="vbox">
        <header class="blue header navbar navbar-fixed-top-xs">
            <ul class="nav navbar-nav hidden-xs" style="padding-left:55px;">
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle blue darken-1" data-toggle="dropdown">
                        <i class="fa fa-building-o white-text"></i> <span class="font-bold white-text">Activity</span>
                    </a>
                    <section class="dropdown-menu aside-xl on animated fadeInLeft no-borders lt">
                        <div class="wrapper m-t-n-xs">
                            <a href="#" class="thumb pull-left m-r"> <img src="images/avatar.jpg" class="img-circle"> </a>
                            <div class="clear">
                                <a href="#"><span class="black-text font-bold">@{{username}}</span></a>
                                <small class="block">Art Director</small>
                            </div>
                        </div>
                    </section>
                </li>
                <li>
                    <div class="blue darken-1" style="padding:15px;">
                        <i class="fa fa-clock-o white-text"></i> <span id="currentTime" class="font-bold white-text">{{curTime}}</span>
                    </div>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right hidden-xs nav-user">
                <li class="hidden-xs">
                    <a href="#" class="dropdown-toggle blue darken-1" data-toggle="dropdown">
                        <i class="fa fa-bell white-text"></i> <span class="badge badge-sm up bg-danger m-l-n-sm count">{{notiCount}}</span>
                    </a>
                    <section class="dropdown-menu aside-xl">
                        <section class="panel bg-white">
                            <header class="panel-heading b-light bg-light">
                                <strong>You have <span class="count">{{notiCount}}</span> notification</strong>
                            </header>
                            <div class="list-group list-group-alt animated fadeInRight">
                                <notification notiNum=0></notification>
                            </div>
                            <footer class="panel-footer text-sm">
                            </footer>
                        </section>
                    </section>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <span class="thumb-sm avatar pull-left"> <img src="../images/avatar.jpg"> </span>
                        <span id="userName"></span> <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu animated fadeInRight">
                        <span class="arrow top"></span>
                        <li> <a href="#" onclick="navigationCommands.showPage('settingsWindow');">Settings</a> </li>
                        <li> <a v-on:click="open">Profile</a> </li>
                        <li> <a href="#">Help</a> </li>
                        <li class="divider"></li>
                        <li> <a v-on:click="exitApp">Exit</a> </li>
                    </ul>
                </li>
            </ul>
        </header>
        <section>
            <section class="hbox stretch">
                <!-- .aside -->
                <aside class="blue lighten-3 aside-md hidden-print z-depth-3 nav-xs" id="nav">
                    <section class="vbox">
                        <section class="w-f scrollable">
                            <div class="slim-scroll" data-height="auto" data-disable-fade-out="true" data-distance="0" data-size="5px" data-color="#333333">
                                <!-- nav -->
                                <nav class="nav-primary hidden-xs">
                                    <ul class="nav" id="navigation">
                                        <li class="active">
                                            <a href="index.html" class="active">
                                                <i class="fa fa-dashboard icon"> <b class="bg-danger"></b> </i>
                                                <span>Workset</span>
                                            </a>
                                        </li>
                                    </ul>
                                </nav>
                                <!-- / nav -->
                            </div>
                        </section>

                        <!-- This is removed until further noticed 
                        <footer class="footer lt hidden-xs b-t b-dark">
                            <div id="chat" class="dropup">
                                <section class="dropdown-menu on aside-md m-l-n">
                                    <section class="panel bg-white">
                                        <header class="panel-heading b-b b-light">Active chats</header>
                                        <div class="panel-body animated fadeInRight">
                                            <p class="text-sm">No active chats.</p>
                                            <p><a href="#" class="btn btn-sm btn-default">Start a chat</a></p>
                                        </div>
                                    </section>
                                </section>
                            </div>
                            <div id="invite" class="dropup">
                                <section class="dropdown-menu on aside-md m-l-n">
                                    <section class="panel bg-white">
                                        <header class="panel-heading b-b b-light"> John <i class="fa fa-circle text-success"></i> </header>
                                        <div class="panel-body animated fadeInRight">
                                            <p class="text-sm">No contacts in your lists.</p>
                                        </div>
                                    </section>
                                </section>
                            </div>

                            <a href="#nav" data-toggle="class:nav-xs" class="pull-right btn btn-sm btn-dark btn-icon">
                                <i class="fa fa-angle-left text"></i>
                                <i class="fa fa-angle-right text-active"></i>
                            </a>
                        </footer>-->
                    </section>
                </aside>
                <!-- /.aside -->
                <section id="content"> 
                    <section class="vbox"> 
                        <section class="scrollable w-f" style="min-height:100%"> 
                            <iframe id="ctent" src="#" style="min-width:100%;min-height:100%;border:none;"></iframe>
                        </section> 
                    </section> 
                    <a href="#" class="hide nav-off-screen-block" data-toggle="class:nav-off-screen" data-target="#nav"></a> 
                </section> 
                <aside class="bg-light lter b-l aside-md hide" id="notes"> <div class="wrapper">Notification</div> </aside>
            </section>
        </section>
    </section>
    </div>


    <script>
        new Vue({
            el: '#reactApp',
            data: {
                username: 'haikalizz',
                curTime: '',
                notifications: [],
                curPage: '',
                notiCount: notificationManager.notiCount,
            },
            mounted: function () {
                this.$nextTick(function () {
                    setInterval(function () {
                        // Gets the date from backend and renders it
                        this.curTime = commonCommands.currentDate;

                        // Handles the inline navigation
                        if (this.curPage == "" || this.curPage != navigationCommands.nextPage) {
                            document.getElementById('ctent').src = navigationCommands.nextPage;
                            this.curPage = navigationCommands.nextPage;
                        }
                    }.bind(this),1000)
                })
            },
            methods: {
                exitApp() {
                    this.$confirm('Are you sure you want to exit?', 'Warning', {
                        confirmButtonText: 'Yes',
                        cancelButtonText: 'No',
                        type: 'warning'
                    }).then(() => {
                        commonCommands.exitApp();
                    }).catch(() => {
                        this.$message({
                            type: 'info',
                            message: 'Shutdown Cancelled'
                        });          
                    });
                },
                open() {
                    const h = this.$createElement;

                    this.$notify({
                        title: 'Title',
                        message: h('p', { style: 'color: red' }, 'This is a reminder')
                    });
                },
            }
        })
    </script>
</body>
</html>